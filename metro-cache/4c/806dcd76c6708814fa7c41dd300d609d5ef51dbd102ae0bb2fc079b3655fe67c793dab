{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"infoLog","data":{"isAsync":false}},{"name":"fbjs/lib/invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),u=r(d[1]),s=r(d[2]),n=(r(d[3]),r(d[4])),o=(function(){function o(t){var s=t.onMoreTasks;u(this,o),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return s(o,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var u=this;t.forEach(function(t){return u.enqueue(t)})}},{key:\"cancelTasks\",value:function(u){this._queueStack=this._queueStack.map(function(s){return t({},s,{tasks:s.tasks.filter(function(t){return-1===u.indexOf(t)})})}).filter(function(t,u){return t.tasks.length>0||0===u})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var u=t.shift();try{u.gen?this._genPromise(u):u.run?u.run():(n('function'==typeof u,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(u,null,2)),u())}catch(t){throw t.message='TaskQueue: Error with task '+(u.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,u=this._queueStack[t];return u.popable&&0===u.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):u.tasks}},{key:\"_genPromise\",value:function(t){var u=this;this._queueStack.push({tasks:[],popable:!1});var s=this._queueStack.length-1;t.gen().then(function(){u._queueStack[s].popable=!0,u.hasTasksToProcess()&&u._onMoreTasks()}).catch(function(u){throw u.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+u.message,u}).done()}}]),o})();m.exports=o});","map":[[1,28,11,0],[1,75,14,6,"invariant"],[1,78,13,16,"require"],[1,80,13,23,"d"],[1,82,13,23],[1,86,14,18,"require"],[1,88,14,25,"d"],[1,90,14,25],[1,95,44,6,"TaskQueue"],[1,109,52,2],[1,118,52,2,"TaskQueue"],[1,120,52,2,"_ref"],[1,123,52,56],[1,127,52,15,"onMoreTasks"],[1,129,52,56,"_ref"],[1,131,52,15,"onMoreTasks"],[1,143,52,56,"_classCallCheck"],[1,145,52,56,"this"],[1,150,52,56,"TaskQueue"],[1,153,53,4,"this"],[1,158,53,9,"_onMoreTasks"],[1,171,53,24,"onMoreTasks"],[1,173,54,4,"this"],[1,178,54,9,"_queueStack"],[1,192,54,25,"tasks"],[1,201,54,36,"popable"],[1,210,54,45],[1,256,62,10,"task"],[1,259,63,4,"this"],[1,264,63,9,"_getCurrentQueue"],[1,283,63,28,"push"],[1,288,63,33,"task"],[1,328,66,15,"tasks"],[1,331,66,41],[1,335,66,41,"_this"],[1,337,66,41,"this"],[1,342,67,4,"tasks"],[1,344,67,10,"forEach"],[1,352,67,18],[1,361,67,18,"task"],[1,364,67,22],[1,371,67,26,"_this"],[1,373,67,31,"enqueue"],[1,381,67,39,"task"],[1,422,70,14,"tasksToCancel"],[1,425,72,4,"this"],[1,430,72,9,"_queueStack"],[1,442,72,23,"this"],[1,447,72,28,"_queueStack"],[1,459,73,7,"map"],[1,463,73,11],[1,472,73,11,"queue"],[1,475,73,16],[1,482,73,16,"_objectSpread"],[1,487,74,11,"queue"],[1,490,75,8,"tasks"],[1,496,75,15,"queue"],[1,498,75,21,"tasks"],[1,504,75,27,"filter"],[1,511,75,34],[1,520,75,34,"task"],[1,523,75,38],[1,530,75,42],[1,534,75,42,"tasksToCancel"],[1,536,75,56,"indexOf"],[1,544,75,64,"task"],[1,553,77,7,"filter"],[1,560,77,14],[1,569,77,15,"queue"],[1,571,77,22,"idx"],[1,574,77,14],[1,581,77,30,"queue"],[1,583,77,36,"tasks"],[1,589,77,42,"length"],[1,596,77,51],[1,599,77,64],[1,603,77,56,"idx"],[1,651,91,4],[1,658,91,11,"this"],[1,663,91,16,"_getCurrentQueue"],[1,682,91,35,"length"],[1,689,91,44],[1,729,98,4],[1,733,98,10,"queue"],[1,735,98,18,"this"],[1,740,98,23,"_getCurrentQueue"],[1,759,99,4],[1,762,99,8,"queue"],[1,764,99,14,"length"],[1,771,99,22],[1,772,100,6],[1,776,100,12,"task"],[1,778,100,19,"queue"],[1,780,100,25,"shift"],[1,788,101,6],[1,792,102,12,"task"],[1,794,102,17,"gen"],[1,798,104,10,"this"],[1,803,104,15,"_genPromise"],[1,815,104,28,"task"],[1,818,105,19,"task"],[1,820,105,24,"run"],[1,824,107,10,"task"],[1,826,107,15,"run"],[1,833,109,10,"invariant"],[1,835,110,28],[1,854,110,19,"task"],[1,856,111,12],[1,916,112,14,"JSON"],[1,921,112,19,"stringify"],[1,931,112,29,"task"],[1,933,112,35],[1,938,112,41],[1,942,115,10,"task"],[1,947,117,8],[1,953,117,15,"e"],[1,956,120,8],[1,962,118,8,"e"],[1,964,118,10,"message"],[1,972,119,10],[1,1003,119,43,"task"],[1,1005,119,48,"name"],[1,1011,119,56],[1,1015,119,62],[1,1020,119,69,"e"],[1,1022,119,71,"message"],[1,1030,120,14,"e"],[1,1077,129,4],[1,1081,129,10,"stackIdx"],[1,1083,129,21,"this"],[1,1088,129,26,"_queueStack"],[1,1100,129,38,"length"],[1,1107,129,47],[1,1109,130,10,"queue"],[1,1111,130,18,"this"],[1,1116,130,23,"_queueStack"],[1,1128,130,35,"stackIdx"],[1,1131,131,4],[1,1138,132,6,"queue"],[1,1140,132,12,"popable"],[1,1149,133,29],[1,1153,133,6,"queue"],[1,1155,133,12,"tasks"],[1,1161,133,18,"length"],[1,1169,134,6,"this"],[1,1174,134,11,"_queueStack"],[1,1186,134,23,"length"],[1,1193,134,32],[1,1196,136,6,"this"],[1,1201,136,11,"_queueStack"],[1,1213,136,23,"pop"],[1,1219,142,13,"this"],[1,1224,142,18,"_getCurrentQueue"],[1,1244,144,13,"queue"],[1,1246,144,19,"tasks"],[1,1288,148,14,"task"],[1,1291,148,33],[1,1295,148,33,"_this2"],[1,1297,148,33,"this"],[1,1302,153,4,"this"],[1,1307,153,9,"_queueStack"],[1,1319,153,21,"push"],[1,1325,153,27,"tasks"],[1,1334,153,38,"popable"],[1,1343,153,47],[1,1347,154,4],[1,1351,154,10,"stackIdx"],[1,1353,154,21,"this"],[1,1358,154,26,"_queueStack"],[1,1370,154,38,"length"],[1,1377,154,47],[1,1379,157,4,"task"],[1,1381,158,7,"gen"],[1,1387,159,7,"then"],[1,1392,159,12],[1,1403,165,8,"_this2"],[1,1405,165,13,"_queueStack"],[1,1417,165,25,"stackIdx"],[1,1420,165,35,"popable"],[1,1429,165,45],[1,1431,166,8,"_this2"],[1,1433,166,13,"hasTasksToProcess"],[1,1454,166,36,"_this2"],[1,1456,166,41,"_onMoreTasks"],[1,1473,168,7,"catch"],[1,1479,168,13],[1,1488,168,13,"ex"],[1,1491,172,8],[1,1497,169,8,"ex"],[1,1499,169,11,"message"],[1,1507,169,8],[1,1553,170,10,"task"],[1,1555,170,15,"name"],[1,1560,169,8],[1,1565,171,13,"ex"],[1,1567,171,16,"message"],[1,1575,172,14,"ex"],[1,1579,174,7,"done"],[1,1596,178,0,"module"],[1,1598,178,7,"exports"],[1,1606,178,17,"TaskQueue"]]},"type":"js/module"}]}