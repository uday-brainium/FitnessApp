{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"fbjs/lib/invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=r(d[4]),h=(function(){function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};s(this,h),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=t}return o(h,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,s,o,h){var c=this._config,f=c.itemVisiblePercentThreshold,v=c.viewAreaCoveragePercentThreshold,_=null!=v,b=_?v:f;l(null!=b&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var y=[];if(0===t)return y;var w=-1,I=h||{first:0,last:t-1},p=I.first,k=I.last;l(k<t,'Invalid render range '+JSON.stringify({renderRange:h,itemCount:t}));for(var S=p;S<=k;S++){var T=o(S);if(T){var A=T.offset-n,V=A+T.length;if(A<s&&V>0)w=S,u(_,b,A,V,s,T.length)&&y.push(S);else if(w>=0)break}}return y}},{key:\"onUpdate\",value:function(t,n,s,o,l,h,u){var c=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&o(0)){var f=[];if(t&&(f=this.computeViewableItems(t,n,s,o,u)),this._viewableIndices.length!==f.length||!this._viewableIndices.every(function(t,n){return t===f[n]}))if(this._viewableIndices=f,this._config.minimumViewTime){var v=setTimeout(function(){c._timers.delete(v),c._onUpdateSync(f,h,l)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(f,h,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(s,o,l){var h=this;s=s.filter(function(t){return h._viewableIndices.includes(t)});var u=this._viewableItems,c=new Map(s.map(function(t){var n=l(t,!0);return[n.key,n]})),f=[],v=c,_=Array.isArray(v),b=0;for(v=_?v:v[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var y;if(_){if(b>=v.length)break;y=v[b++]}else{if((b=v.next()).done)break;y=b.value}var w=n(y,2),I=w[0],p=w[1];u.has(I)||f.push(p)}var k=u,S=Array.isArray(k),T=0;for(k=S?k:k[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var A;if(S){if(T>=k.length)break;A=k[T++]}else{if((T=k.next()).done)break;A=T.value}var V=n(A,2),x=V[0],M=V[1];c.has(x)||f.push(t({},M,{isViewable:!1}))}f.length>0&&(this._viewableItems=c,o({viewableItems:Array.from(c.values()),changed:f,viewabilityConfig:this._config}))}}]),h})();function u(t,n,s,o,l,h){if(f(s,o,l))return!0;var u=c(s,o,l);return 100*(t?u/l:u/h)>=n}function c(t,n,s){var o=Math.min(n,s)-Math.max(t,0);return Math.max(0,o)}function f(t,n,s){return t>=0&&n<=s&&n>t}m.exports=h});","map":[[1,28,10,0],[1,85,12,6,"invariant"],[1,87,12,18,"require"],[1,89,12,25,"d"],[1,91,12,25],[1,95,71,6,"ViewabilityHelper"],[1,109,81,2],[1,118,81,2,"ViewabilityHelper"],[1,122,83,4],[1,126,82,4,"config"],[1,128,83,4,"arguments"],[1,138,83,4,"length"],[1,145,83,4],[1,153,83,4,"undefined"],[1,157,83,4,"arguments"],[1,167,83,4],[1,170,83,4,"arguments"],[1,180,83,4],[1,184,82,33,"viewAreaCoveragePercentThreshold"],[1,217,82,67],[1,220,83,4,"_classCallCheck"],[1,222,83,4,"this"],[1,227,83,4,"ViewabilityHelper"],[1,230,83,4,"this"],[1,235,73,2,"_hasInteracted"],[1,251,73,28],[1,253,83,4,"this"],[1,258,77,2,"_timers"],[1,266,77,25],[1,270,77,29,"Set"],[1,274,83,4,"this"],[1,279,78,2,"_viewableIndices"],[1,299,83,4,"this"],[1,304,79,2,"_viewableItems"],[1,319,79,43],[1,323,79,47,"Map"],[1,327,84,4,"this"],[1,332,84,9,"_config"],[1,340,84,19,"config"],[1,386,91,4,"this"],[1,391,91,9,"_timers"],[1,399,91,17,"forEach"],[1,407,91,25,"clearTimeout"],[1,466,98,4,"itemCount"],[1,468,99,4,"scrollOffset"],[1,470,100,4,"viewportHeight"],[1,472,101,4,"getFrameMetrics"],[1,474,102,4,"renderRange"],[1,477,103,19],[1,481,103,19,"_this$_config"],[1,483,107,8,"this"],[1,488,107,13,"_config"],[1,496,105,6,"itemVisiblePercentThreshold"],[1,498,103,19,"_this$_config"],[1,500,105,6,"itemVisiblePercentThreshold"],[1,528,106,6,"viewAreaCoveragePercentThreshold"],[1,530,103,19,"_this$_config"],[1,532,106,6,"viewAreaCoveragePercentThreshold"],[1,565,108,10,"viewAreaMode"],[1,567,108,61],[1,573,108,25,"viewAreaCoveragePercentThreshold"],[1,575,109,10,"viewablePercentThreshold"],[1,577,109,37,"viewAreaMode"],[1,579,110,8,"viewAreaCoveragePercentThreshold"],[1,581,111,8,"itemVisiblePercentThreshold"],[1,583,112,4,"invariant"],[1,585,113,34],[1,591,113,6,"viewablePercentThreshold"],[1,594,114,40],[1,600,114,9,"itemVisiblePercentThreshold"],[1,604,115,47],[1,610,115,11,"viewAreaCoveragePercentThreshold"],[1,613,116,6],[1,704,118,4],[1,708,118,10,"viewableIndices"],[1,713,119,4],[1,716,119,22],[1,720,119,8,"itemCount"],[1,722,120,6],[1,729,120,13,"viewableIndices"],[1,731,122,4],[1,735,122,8,"firstVisible"],[1,738,122,20],[1,740,103,19,"_ref"],[1,742,123,26,"renderRange"],[1,746,123,42,"first"],[1,752,123,49],[1,754,123,52,"last"],[1,759,123,58,"itemCount"],[1,761,123,70],[1,764,123,11,"first"],[1,766,103,19,"_ref"],[1,768,123,11,"first"],[1,774,123,18,"last"],[1,776,103,19,"_ref"],[1,778,123,18,"last"],[1,783,124,4,"invariant"],[1,785,125,6,"last"],[1,787,125,13,"itemCount"],[1,789,126,6],[1,813,126,32,"JSON"],[1,818,126,37,"stringify"],[1,829,126,48,"renderRange"],[1,841,126,48,"renderRange"],[1,843,126,61,"itemCount"],[1,853,126,61,"itemCount"],[1,858,128,4],[1,862,128,9],[1,866,128,13,"idx"],[1,868,128,19,"first"],[1,870,128,26,"idx"],[1,873,128,33,"last"],[1,875,128,39,"idx"],[1,879,128,46],[1,880,129,6],[1,884,129,12,"metrics"],[1,886,129,22,"getFrameMetrics"],[1,888,129,38,"idx"],[1,891,130,6],[1,894,130,11,"metrics"],[1,896,130,6],[1,897,133,6],[1,901,133,12,"top"],[1,903,133,18,"metrics"],[1,905,133,26,"offset"],[1,912,133,35,"scrollOffset"],[1,914,134,12,"bottom"],[1,916,134,21,"top"],[1,918,134,27,"metrics"],[1,920,134,35,"length"],[1,927,135,6],[1,930,135,10,"top"],[1,932,135,16,"viewportHeight"],[1,935,135,34,"bottom"],[1,937,135,43],[1,939,136,8,"firstVisible"],[1,941,136,23,"idx"],[1,943,138,10,"_isViewable"],[1,945,139,12,"viewAreaMode"],[1,947,140,12,"viewablePercentThreshold"],[1,949,141,12,"top"],[1,951,142,12,"bottom"],[1,953,143,12,"viewportHeight"],[1,955,144,12,"metrics"],[1,957,144,20,"length"],[1,966,147,10,"viewableIndices"],[1,968,147,26,"push"],[1,973,147,31,"idx"],[1,981,149,13],[1,984,149,17,"firstVisible"],[1,987,149,33],[1,989,150,8],[1,996,153,4],[1,1003,153,11,"viewableIndices"],[1,1038,161,4,"itemCount"],[1,1040,162,4,"scrollOffset"],[1,1042,163,4,"viewportHeight"],[1,1044,164,4,"getFrameMetrics"],[1,1046,165,4,"createViewToken"],[1,1048,166,4,"onViewableItemsChanged"],[1,1050,170,4,"renderRange"],[1,1053,171,10],[1,1057,171,10,"_this"],[1,1059,171,10,"this"],[1,1064,172,4],[1,1069,173,7,"this"],[1,1074,173,12,"_config"],[1,1082,173,20,"waitForInteraction"],[1,1102,173,43,"this"],[1,1107,173,48,"_hasInteracted"],[1,1124,174,20],[1,1128,174,6,"itemCount"],[1,1131,175,7,"getFrameMetrics"],[1,1133,175,23],[1,1136,172,4],[1,1137,179,4],[1,1141,179,8,"viewableIndices"],[1,1146,189,4],[1,1149,180,8,"itemCount"],[1,1153,181,6,"viewableIndices"],[1,1155,181,24,"this"],[1,1160,181,29,"computeViewableItems"],[1,1181,182,8,"itemCount"],[1,1183,183,8,"scrollOffset"],[1,1185,184,8,"viewportHeight"],[1,1187,185,8,"getFrameMetrics"],[1,1189,186,8,"renderRange"],[1,1193,190,6,"this"],[1,1198,190,11,"_viewableIndices"],[1,1215,190,28,"length"],[1,1224,190,39,"viewableIndices"],[1,1226,190,55,"length"],[1,1235,191,6,"this"],[1,1240,191,11,"_viewableIndices"],[1,1257,191,28,"every"],[1,1263,191,34],[1,1272,191,35,"v"],[1,1274,191,38,"ii"],[1,1277,191,34],[1,1284,191,45,"v"],[1,1288,191,51,"viewableIndices"],[1,1290,191,67,"ii"],[1,1295,198,4],[1,1298,197,4,"this"],[1,1303,197,9,"_viewableIndices"],[1,1320,197,28,"viewableIndices"],[1,1322,198,8,"this"],[1,1327,198,13,"_config"],[1,1335,198,21,"minimumViewTime"],[1,1351,198,38],[1,1352,199,6],[1,1356,199,12,"handle"],[1,1358,199,21,"setTimeout"],[1,1369,199,32],[1,1380,200,8,"_this"],[1,1382,200,13,"_timers"],[1,1390,200,21,"delete"],[1,1397,200,28,"handle"],[1,1400,201,8,"_this"],[1,1402,201,13,"_onUpdateSync"],[1,1416,202,10,"viewableIndices"],[1,1418,203,10,"onViewableItemsChanged"],[1,1420,204,10,"createViewToken"],[1,1424,206,9,"this"],[1,1429,206,14,"_config"],[1,1437,206,22,"minimumViewTime"],[1,1454,207,6,"this"],[1,1459,207,11,"_timers"],[1,1467,207,19,"add"],[1,1471,207,23,"handle"],[1,1479,209,6,"this"],[1,1484,209,11,"_onUpdateSync"],[1,1498,210,8,"viewableIndices"],[1,1500,211,8,"onViewableItemsChanged"],[1,1502,212,8,"createViewToken"],[1,1553,221,4,"this"],[1,1558,221,9,"_viewableIndices"],[1,1622,228,4,"this"],[1,1627,228,9,"_hasInteracted"],[1,1643,228,26],[1,1683,232,4,"viewableIndicesToCheck"],[1,1685,233,4,"onViewableItemsChanged"],[1,1687,234,4,"createViewToken"],[1,1690,235,4],[1,1694,235,4,"_this2"],[1,1696,235,4,"this"],[1,1701,237,4,"viewableIndicesToCheck"],[1,1703,237,29,"viewableIndicesToCheck"],[1,1705,237,52,"filter"],[1,1712,237,59],[1,1721,237,59,"ii"],[1,1724,237,61],[1,1731,238,6,"_this2"],[1,1733,238,11,"_viewableIndices"],[1,1750,238,28,"includes"],[1,1759,238,37,"ii"],[1,1764,240,4],[1,1768,240,10,"prevItems"],[1,1770,240,22,"this"],[1,1775,240,27,"_viewableItems"],[1,1790,241,10,"nextItems"],[1,1792,241,22],[1,1796,241,26,"Map"],[1,1800,242,6,"viewableIndicesToCheck"],[1,1802,242,29,"map"],[1,1806,242,33],[1,1815,242,33,"ii"],[1,1818,243,8],[1,1822,243,14,"viewable"],[1,1824,243,25,"createViewToken"],[1,1826,243,41,"ii"],[1,1829,243,45],[1,1832,244,8],[1,1839,244,16,"viewable"],[1,1841,244,25,"key"],[1,1845,244,30,"viewable"],[1,1851,248,10,"changed"],[1,1856,249,4,"_iterator"],[1,1858,249,34,"nextItems"],[1,1860,249,4,"_isArray"],[1,1862,249,4,"Array"],[1,1868,249,4,"isArray"],[1,1876,249,4,"_iterator"],[1,1879,249,4,"_i"],[1,1881,249,4],[1,1883,249,4],[1,1887,249,4,"_iterator"],[1,1889,249,4,"_isArray"],[1,1891,249,4,"_iterator"],[1,1893,249,4,"_iterator"],[1,1895,249,4],[1,1914,249,4,"Symbol"],[1,1921,249,4,"Symbol"],[1,1928,249,4,"iterator"],[1,1937,249,4],[1,1955,249,45],[1,1956,249,45],[1,1960,249,45,"_ref4"],[1,1962,249,45],[1,1965,249,45,"_isArray"],[1,1967,249,45],[1,1968,249,45],[1,1971,249,45,"_i"],[1,1974,249,45,"_iterator"],[1,1976,249,45,"length"],[1,1983,249,45],[1,1989,249,45,"_ref4"],[1,1991,249,45,"_iterator"],[1,1993,249,45,"_i"],[1,2002,249,45],[1,2003,249,45],[1,2007,249,45,"_i"],[1,2009,249,45,"_iterator"],[1,2011,249,45,"next"],[1,2019,249,45,"done"],[1,2024,249,45],[1,2030,249,45,"_ref4"],[1,2032,249,45,"_i"],[1,2034,249,45,"value"],[1,2040,249,45],[1,2044,249,45,"_ref3"],[1,2046,249,45,"_slicedToArray"],[1,2048,249,45,"_ref4"],[1,2050,249,45],[1,2053,249,16,"key"],[1,2055,249,45,"_ref3"],[1,2057,249,45],[1,2060,249,21,"viewable"],[1,2062,249,45,"_ref3"],[1,2064,249,45],[1,2067,250,11,"prevItems"],[1,2069,250,21,"has"],[1,2073,250,25,"key"],[1,2077,251,8,"changed"],[1,2079,251,16,"push"],[1,2084,251,21,"viewable"],[1,2087,254,4],[1,2091,254,4,"_iterator2"],[1,2093,254,34,"prevItems"],[1,2095,254,4,"_isArray2"],[1,2097,254,4,"Array"],[1,2103,254,4,"isArray"],[1,2111,254,4,"_iterator2"],[1,2114,254,4,"_i2"],[1,2116,254,4],[1,2118,254,4],[1,2122,254,4,"_iterator2"],[1,2124,254,4,"_isArray2"],[1,2126,254,4,"_iterator2"],[1,2128,254,4,"_iterator2"],[1,2130,254,4],[1,2149,254,4,"Symbol"],[1,2156,254,4,"Symbol"],[1,2163,254,4,"iterator"],[1,2172,254,4],[1,2190,254,45],[1,2191,254,45],[1,2195,254,45,"_ref7"],[1,2197,254,45],[1,2200,254,45,"_isArray2"],[1,2202,254,45],[1,2203,254,45],[1,2206,254,45,"_i2"],[1,2209,254,45,"_iterator2"],[1,2211,254,45,"length"],[1,2218,254,45],[1,2224,254,45,"_ref7"],[1,2226,254,45,"_iterator2"],[1,2228,254,45,"_i2"],[1,2237,254,45],[1,2238,254,45],[1,2242,254,45,"_i2"],[1,2244,254,45,"_iterator2"],[1,2246,254,45,"next"],[1,2254,254,45,"done"],[1,2259,254,45],[1,2265,254,45,"_ref7"],[1,2267,254,45,"_i2"],[1,2269,254,45,"value"],[1,2275,254,45],[1,2279,254,45,"_ref6"],[1,2281,254,45,"_slicedToArray"],[1,2283,254,45,"_ref7"],[1,2285,254,45],[1,2288,254,16,"key"],[1,2290,254,45,"_ref6"],[1,2292,254,45],[1,2295,254,21,"viewable"],[1,2297,254,45,"_ref6"],[1,2299,254,45],[1,2302,255,11,"nextItems"],[1,2304,255,21,"has"],[1,2308,255,25,"key"],[1,2312,256,8,"changed"],[1,2314,256,16,"push"],[1,2319,256,8,"_objectSpread"],[1,2324,256,25,"viewable"],[1,2327,256,35,"isViewable"],[1,2339,256,47],[1,2344,259,8,"changed"],[1,2346,259,16,"length"],[1,2353,259,25],[1,2357,260,6,"this"],[1,2362,260,11,"_viewableItems"],[1,2377,260,28,"nextItems"],[1,2379,261,6,"onViewableItemsChanged"],[1,2382,262,8,"viewableItems"],[1,2396,262,23,"Array"],[1,2402,262,29,"from"],[1,2407,262,34,"nextItems"],[1,2409,262,44,"values"],[1,2419,263,8,"changed"],[1,2427,263,8,"changed"],[1,2429,264,8,"viewabilityConfig"],[1,2447,264,27,"this"],[1,2452,264,32,"_config"],[1,2473,270,0],[1,2482,270,9,"_isViewable"],[1,2484,271,2,"viewAreaMode"],[1,2486,272,2,"viewablePercentThreshold"],[1,2488,273,2,"top"],[1,2490,274,2,"bottom"],[1,2492,275,2,"viewportHeight"],[1,2494,276,2,"itemLength"],[1,2497,278,2],[1,2500,278,6,"_isEntirelyVisible"],[1,2502,278,25,"top"],[1,2504,278,30,"bottom"],[1,2506,278,38,"viewportHeight"],[1,2509,279,4],[1,2516,279,11],[1,2518,281,4],[1,2522,281,10,"pixels"],[1,2524,281,19,"_getPixelsVisible"],[1,2526,281,37,"top"],[1,2528,281,42,"bottom"],[1,2530,281,50,"viewportHeight"],[1,2533,284,4],[1,2540,283,6],[1,2545,283,13,"viewAreaMode"],[1,2547,283,28,"pixels"],[1,2549,283,37,"viewportHeight"],[1,2551,283,54,"pixels"],[1,2553,283,63,"itemLength"],[1,2557,284,22,"viewablePercentThreshold"],[1,2559,288,0],[1,2568,288,9,"_getPixelsVisible"],[1,2570,289,2,"top"],[1,2572,290,2,"bottom"],[1,2574,291,2,"viewportHeight"],[1,2577,293,2],[1,2581,293,8,"visibleHeight"],[1,2583,293,24,"Math"],[1,2588,293,29,"min"],[1,2592,293,33,"bottom"],[1,2594,293,41,"viewportHeight"],[1,2597,293,59,"Math"],[1,2602,293,64,"max"],[1,2606,293,68,"top"],[1,2608,293,73],[1,2611,294,2],[1,2618,294,9,"Math"],[1,2623,294,14,"max"],[1,2627,294,18],[1,2629,294,21,"visibleHeight"],[1,2632,297,0],[1,2641,297,9,"_isEntirelyVisible"],[1,2643,298,2,"top"],[1,2645,299,2,"bottom"],[1,2647,300,2,"viewportHeight"],[1,2650,302,2],[1,2657,302,9,"top"],[1,2660,302,16],[1,2663,302,21,"bottom"],[1,2666,302,31,"viewportHeight"],[1,2669,302,49,"bottom"],[1,2671,302,58,"top"],[1,2673,305,0,"module"],[1,2675,305,7,"exports"],[1,2683,305,17,"ViewabilityHelper"]]},"type":"js/module"}]}